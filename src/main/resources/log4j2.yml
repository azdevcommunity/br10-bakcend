Configuration:
    status: error

    properties:
        property:
            - name: name
              value: "@project.artifactId@-@project.version@-${hostName}"
            - name: application_log_path
              value: "log/tezpay-dev/${name}/application"
            - name: service_log_path
              value: "log/tezpay-dev/${name}/service"

    Appenders:
        Console:
            name: console
            PatternLayout:
                pattern: "%d{yyyy-MM-dd HH:mm:ss.SSS}  %highlight{%p}{FATAL=red blink, ERROR=red, WARN=yellow bold, INFO=green, DEBUG=green bold, TRACE=blue} %style{${sys:PID}}{magenta} [%15.15t] %style{%-40.40C{1.}}{cyan} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}"

        RollingFile:
            - name: application_log_appender
              fileName: "${application_log_path}/${name}-application.log"
              filePattern: "${application_log_path}/${name}-application-log-%d{yyyy-MM-dd-HHZ}-%i.log.gz"
              JsonTemplateLayout:
                  eventTemplateUri: classpath:Ecs-template.json
              Policies:
                  OnStartupTriggeringPolicy: { }
                  TimeBasedTriggeringPolicy:
                      interval: 1
                      modulate: true
                  SizeBasedTriggeringPolicy:
                      size: 30 MB
              DefaultRolloverStrategy:
                  Delete:
                      basePath: "${application_log_path}"
                      maxDepth: 1
                      IfAll:
                          IfAccumulatedFileCount:
                              exceeds: 10000

            - name: service_log_appender
              fileName: "${service_log_path}/${name}-service.log"
              filePattern: "${service_log_path}/${name}-service-log-%d{yyyy-MM-dd-HHZ}-%i.log.gz"
              JsonTemplateLayout:
                  eventTemplateUri: classpath:Ecs-template.json
                  locationInfoEnabled: true
              Policies:
                  OnStartupTriggeringPolicy: { }
                  TimeBasedTriggeringPolicy:
                      interval: 1
                      modulate: true
                  SizeBasedTriggeringPolicy:
                      size: 30 MB
              DefaultRolloverStrategy:
                  Delete:
                      basePath: "${service_log_path}"
                      maxDepth: 1
                      IfAll:
                          IfAccumulatedFileCount:
                              exceeds: 10000

    Loggers:
        Root:
            level: info
            includeLocation: true
            AppenderRef:
                - ref: console
                - ref: application_log_appender

        AsyncLogger:
            - name: az.tezpay.middleware
              level: info
              additivity: false
              AppenderRef:
                  - ref: service_log_appender
